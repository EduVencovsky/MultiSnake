(this["webpackJsonp@multi-snake/web"]=this["webpackJsonp@multi-snake/web"]||[]).push([[0],{51:function(e,n,t){},52:function(e,n,t){},87:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(0),a=t.n(c),i=t(40),o=t.n(i),u=(t(51),t(23)),l=t(6),s=t(15),d=(t(52),t(41)),f=t(42),b=t(44);function j(){var e=Object(f.a)(["\n  width: 25px;\n  height: 25px;\n  border: 1px solid white;\n  background-color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return j=function(){return e},e}var p=["\ud83c\udf53","\ud83c\udf47","\ud83c\udf48","\ud83c\udf49","\ud83c\udf4a","\ud83c\udf4b","\ud83c\udf4c","\ud83c\udf4d","\ud83e\udd6d","\ud83c\udf4e","\ud83c\udf4f","\ud83c\udf50","\ud83c\udf51","\ud83c\udf52"],y=b.a.div(j(),(function(e){return e.tile.player?e.playerId===e.tile.player.id?"deepskyblue":"white":"rgba(0,0,0,0)"})),v=a.a.memo((function(e){var n=e.children,t=e.tile,a=e.playerId,i=Object(c.useMemo)((function(){return p[Math.floor(Math.random()*p.length)]}),[]);return Object(r.jsxs)(y,{tile:t,playerId:a,children:[t.fruit&&i,n]})})),w=t(24);function O(e,n){var t=Object(c.useCallback)((function(t){var r=t.key,c=Object(w.a)(t,["key"]);r===e&&n(Object(l.a)({key:r},c))}),[e,n]),r=Object(c.useCallback)((function(t){var r=t.key,c=Object(w.a)(t,["key"]);r===e&&n(Object(l.a)({key:r},c))}),[e,n]);Object(c.useEffect)((function(){return window.addEventListener("keydown",t),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",r)}}),[t,r])}var m="".concat("wss","://").concat("venkos-multi-snake.herokuapp.com"),h=new d.Manager(m).socket("/");var k=function(){var e=Object(c.useState)(),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(null),o=Object(u.a)(i,2),d=o[0],f=o[1],b=Object(c.useRef)(h);Object(c.useEffect)((function(){b.current.io.on("connect",(function(){console.log("connect ".concat(b.current.id))})),b.current.io.on("error",(function(e){console.error(e)}))}),[]),Object(c.useEffect)((function(){b.current.on("game-status",(function(e){null!==e.winner&&"string"===typeof e.winner&&f("draw"===e.winner?"draw":e.winner===b.current.id?"win":"lose");var n,t,r=(n=e.boardX,t=e.boardY,new Array(n).fill("").map((function(e,n){return new Array(t).fill("").map((function(e,t){return{player:null,fruit:!1,empty:!0,position:[n,t]}}))})));r=function(e,n){var t,r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;e[c[0]][c[1]]=Object(l.a)(Object(l.a)({},e[c[0]][c[1]]),{},{player:null,empty:!1,fruit:!0})}}catch(a){r.e(a)}finally{r.f()}return e}(r=function(e,n){var t,r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var c,a=t.value,i=Object(s.a)(a.snake);try{for(i.s();!(c=i.n()).done;){var o=c.value;e[o[0]][o[1]]=Object(l.a)(Object(l.a)({},e[o[0]][o[1]]),{},{player:a,empty:!1,fruit:!1})}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}return e}(r,e.players),e.fruits),a(r)}))}),[]);var j=Object(c.useCallback)((function(e){b.current.emit("move-player",b.current.id,"left")}),[]),p=Object(c.useCallback)((function(e){b.current.emit("move-player",b.current.id,"right")}),[]),y=Object(c.useCallback)((function(e){b.current.emit("move-player",b.current.id,"up")}),[]),w=Object(c.useCallback)((function(e){b.current.emit("move-player",b.current.id,"down")}),[]);return O("ArrowLeft",j),O("ArrowRight",p),O("ArrowUp",y),O("ArrowDown",w),console.log("board",t),Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("header",{className:"App-header",children:[Object(r.jsx)("div",{children:"Welcome"}),Object(r.jsx)("div",{children:null!==d&&("draw"===d?"Draw":"win"===d?"You Win":"You Lose")}),Object(r.jsx)("div",{style:{display:"flex"},children:t&&t.map((function(e,n){return Object(r.jsx)("div",{children:e.map((function(e,n){return Object(r.jsx)(v,{tile:e,playerId:b.current.id},n)}))},n)}))})]})})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.4b0c74a8.chunk.js.map